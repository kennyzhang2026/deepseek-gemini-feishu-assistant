# 用户验收测试（UAT）检查清单

本检查清单用于在部署后验证 DeepSeek & Gemini Assistant with Feishu Knowledge Base 应用的所有功能是否正常工作。

## 📋 测试准备

### 测试环境
- [ ] **部署环境**：Streamlit Cloud 应用已成功部署
- [ ] **访问 URL**：应用 URL 可正常访问（如 `https://app-name.streamlit.app`）
- [ ] **API 密钥**：所有必要的 API 密钥已正确配置在 Streamlit Cloud Secrets 中
- [ ] **飞书配置**：飞书多维表格已准备就绪，可接收数据

### 测试人员要求
- [ ] 了解应用的基本功能
- [ ] 准备测试用的文本问题和图片
- [ ] 有飞书账号权限，可查看多维表格

## 🧪 测试用例

### 测试用例 1：配置检查
**目标**：验证侧边栏配置和密钥加载功能

**测试步骤**：
1. [ ] 访问应用 URL
2. [ ] 检查侧边栏是否正常展开
3. [ ] 验证以下配置项是否显示：
   - [ ] DeepSeek API Key 状态（应为"已配置"或显示密钥掩码）
   - [ ] Gemini API Key 状态
   - [ ] 飞书配置状态（App ID、App Secret、Table ID）
4. [ ] 检查代理设置选项（如需要）
5. [ ] 验证"配置状态"部分显示所有配置正常

**预期结果**：
- 侧边栏正常显示
- 所有 API 密钥状态显示为"已配置"或类似成功状态
- 无错误提示

**通过标准**：✅ 所有配置项正确加载，无错误提示

---

### 测试用例 2：文本聊天测试
**目标**：验证 DeepSeek 文本对话功能

**测试步骤**：
1. [ ] 在主聊天区域输入纯文本问题（例如："请用中文介绍人工智能的发展历史"）
2. [ ] 点击"发送"按钮或按 Enter 键
3. [ ] 观察以下指标：
   - [ ] 响应时间（应在 5 秒内）
   - [ ] 模型指示器显示"🤖 DeepSeek"
   - [ ] 回答内容相关且合理
   - [ ] 对话历史正确更新
4. [ ] 进行多轮对话测试
5. [ ] 测试长文本输入（超过 100 字）

**预期结果**：
- DeepSeek 模型正确响应
- 回答内容相关、连贯
- 响应时间符合性能要求
- 对话历史正确维护

**通过标准**：✅ 文本对话功能正常，响应质量良好

---

### 测试用例 3：图片聊天测试
**目标**：验证 Gemini 图片理解功能

**测试步骤**：
1. [ ] 点击"上传图片"按钮
2. [ ] 选择测试图片（建议使用包含明显内容的图片，如风景、物体等）
3. [ ] 输入相关问题（例如："请描述这张图片中的内容"）
4. [ ] 点击"发送"
5. [ ] 观察以下指标：
   - [ ] 模型指示器显示"🖼️ Gemini"
   - [ ] Gemini 正确识别图片内容
   - [ ] 回答与图片内容相关
   - [ ] 图片在聊天界面正确显示
6. [ ] 测试不同格式的图片（JPG、PNG）

**预期结果**：
- 自动切换到 Gemini 模型
- 正确识别图片内容
- 提供相关的描述或回答
- 图片上传和显示正常

**通过标准**：✅ 图片上传和识别功能正常

---

### 测试用例 4：智能路由测试
**目标**：验证系统能根据输入类型自动选择正确模型

**测试步骤**：
1. [ ] 先发送纯文本消息，确认使用 DeepSeek
2. [ ] 再上传图片并提问，确认自动切换到 Gemini
3. [ ] 测试混合输入（先文本后图片，先图片后文本）
4. [ ] 观察模型切换是否平滑，无错误

**预期结果**：
- 纯文本 → DeepSeek
- 包含图片 → Gemini
- 切换过程无错误，UI 正确更新

**通过标准**：✅ 智能路由功能准确无误

---

### 测试用例 5：飞书保存功能测试
**目标**：验证对话记录能正确保存到飞书多维表格

**测试步骤**：
1. [ ] 进行一次有意义的对话（文本或图片）
2. [ ] 在对话记录下方找到"保存到飞书"按钮
3. [ ] 点击按钮
4. [ ] 观察以下指标：
   - [ ] 显示保存状态（"保存中..." → "保存成功"）
   - [ ] 成功提示信息
   - [ ] 无错误提示
5. [ ] 登录飞书，打开对应的多维表格
6. [ ] 验证新记录是否添加：
   - [ ] 用户问题正确保存
   - [ ] AI 回答正确保存
   - [ ] 使用模型正确记录
   - [ ] 时间戳正确

**预期结果**：
- 保存操作成功完成
- 飞书多维表格中新增记录
- 所有字段数据正确

**通过标准**：✅ 数据成功保存到飞书，所有字段正确

---

### 测试用例 6：历史记录管理测试
**目标**：验证对话历史管理功能

**测试步骤**：
1. [ ] 进行多次对话（至少 3 次）
2. [ ] 验证对话历史正确显示所有记录
3. [ ] 测试"清除聊天"功能：
   - [ ] 点击"清除聊天"按钮
   - [ ] 确认提示对话框
   - [ ] 确认清除操作
4. [ ] 验证对话历史是否清空
5. [ ] 测试清除后是否能开始新对话

**预期结果**：
- 对话历史正确维护
- 清除功能正常工作
- 清除后应用状态正常

**通过标准**：✅ 历史记录管理功能正常

---

### 测试用例 7：错误处理测试
**目标**：验证系统的错误处理能力

**测试步骤**：
1. [ ] **无效 API 密钥测试**：
   - [ ] 在侧边栏输入无效的 DeepSeek API Key
   - [ ] 尝试发送消息
   - [ ] 验证是否显示友好的错误提示
2. [ ] **网络错误测试**：
   - [ ] 模拟网络问题（如断开网络）
   - [ ] 验证超时处理和错误提示
3. [ ] **飞书 API 失败测试**：
   - [ ] 使用无效的飞书配置
   - [ ] 尝试保存到飞书
   - [ ] 验证错误提示

**预期结果**：
- 应用不崩溃
- 显示用户友好的错误信息
- 提供解决问题的建议

**通过标准**：✅ 错误处理机制健全，用户体验良好

---

### 测试用例 8：性能测试
**目标**：验证系统性能指标

**测试步骤**：
1. [ ] **响应时间测试**：
   - [ ] 记录文本对话响应时间（目标：< 5 秒）
   - [ ] 记录图片对话响应时间（目标：< 8 秒）
   - [ ] 记录飞书保存时间（目标：< 3 秒）
2. [ ] **并发测试**：
   - [ ] 快速连续发送多条消息
   - [ ] 验证系统稳定性
3. [ ] **内存使用测试**：
   - [ ] 进行长时间对话（20+ 轮）
   - [ ] 验证应用是否稳定

**预期结果**：
- 所有响应时间符合性能要求
- 系统稳定，无崩溃
- 内存使用合理

**通过标准**：✅ 性能指标达标，系统稳定

## 📊 测试结果汇总

### 测试执行记录
| 测试用例 | 测试人员 | 测试日期 | 结果 | 备注 |
|---------|---------|----------|------|------|
| 配置检查 | | | | |
| 文本聊天 | | | | |
| 图片聊天 | | | | |
| 智能路由 | | | | |
| 飞书保存 | | | | |
| 历史管理 | | | | |
| 错误处理 | | | | |
| 性能测试 | | | | |

### 总体评估
- [ ] **所有核心功能正常**
- [ ] **性能指标达标**
- [ ] **用户体验良好**
- [ ] **错误处理完善**
- [ ] **部署成功**

## 🐛 问题跟踪

### 发现的问题
| 问题描述 | 严重程度 | 发现日期 | 状态 | 负责人 |
|---------|---------|----------|------|--------|
| | | | | |

### 问题解决进度
- [ ] 所有严重问题已解决
- [ ] 所有中等问题已解决或制定解决方案
- [ ] 轻微问题已记录并安排后续处理

## ✅ 验收标准

### 必须通过的项目
- [ ] 配置检查通过
- [ ] 文本聊天功能正常
- [ ] 图片聊天功能正常
- [ ] 飞书保存功能正常
- [ ] 智能路由准确

### 建议通过的项目
- [ ] 所有性能指标达标
- [ ] 错误处理完善
- [ ] 用户体验良好

## 📝 测试结论

**测试状态**：□ 通过 □ 有条件通过 □ 不通过

**建议**：
- [ ] 可以投入生产使用
- [ ] 需要修复部分问题后再测试
- [ ] 需要重新设计部分功能

**测试人员签字**：____________________

**测试日期**：____________________

---

**版本信息**：
- 文档版本：1.0
- 最后更新：2026-02-02
- 适用版本：DeepSeek & Gemini Assistant v1.0

**备注**：
- 本检查清单应在每次重大更新或部署后执行
- 建议至少两名测试人员独立执行测试
- 所有测试结果应记录并归档