# DeepSeek & Gemini Assistant with Feishu Knowledge Base

ä¸€ä¸ªåŸºäº Streamlit çš„æ™ºèƒ½èŠå¤©åŠ©æ‰‹åº”ç”¨ï¼Œé›†æˆ DeepSeek å’Œ Gemini AI æ¨¡å‹ï¼Œå®ç°æ™ºèƒ½è·¯ç”±èŠå¤©ï¼ˆæ–‡æœ¬ç”¨ DeepSeekï¼Œå›¾ç‰‡ç”¨ Geminiï¼‰ï¼Œå¹¶å°†æœ‰ä»·å€¼çš„å¯¹è¯è®°å½•è‡ªåŠ¨ä¿å­˜åˆ°é£ä¹¦å¤šç»´è¡¨æ ¼ï¼Œä½œä¸ºä¸ªäººçŸ¥è¯†åº“ç§¯ç´¯ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– æ™ºèƒ½è·¯ç”±èŠå¤©ç³»ç»Ÿ
- **æ–‡æœ¬å¯¹è¯**ï¼šè‡ªåŠ¨è°ƒç”¨ DeepSeek æ¨¡å‹ï¼ˆé€šè¿‡ OpenAI å…¼å®¹æ¥å£ï¼‰
- **å›¾ç‰‡ç†è§£**ï¼šä¸Šä¼ å›¾ç‰‡è‡ªåŠ¨åˆ‡æ¢è°ƒç”¨ Gemini æ¨¡å‹ï¼ˆæ”¯æŒå¤šæ¨¡æ€ç†è§£ï¼‰
- **æ™ºèƒ½è·¯ç”±**ï¼šæ ¹æ®è¾“å…¥ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„ AI æ¨¡å‹ï¼Œæ— éœ€æ‰‹åŠ¨åˆ‡æ¢
- **å¯¹è¯å†å²**ï¼šå®Œæ•´çš„å¯¹è¯å†å²åœ¨ Session State ä¸­ç»´æŠ¤

### ğŸ“Š é£ä¹¦çŸ¥è¯†åº“é›†æˆ
- **ä¸€é”®ä¿å­˜**ï¼šèŠå¤©æ¡†ä¸‹æ–¹æä¾›"ä¿å­˜åˆ°é£ä¹¦"æŒ‰é’®
- **è‡ªåŠ¨è®°å½•**ï¼šä¿å­˜ç”¨æˆ·é—®é¢˜ã€AIå›ç­”ã€ä½¿ç”¨æ¨¡å‹ã€æ—¶é—´æˆ³åˆ°é£ä¹¦å¤šç»´è¡¨æ ¼
- **çŠ¶æ€åé¦ˆ**ï¼šå®æ—¶æ˜¾ç¤ºå†™å…¥çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥æç¤ºï¼‰
- **æ•°æ®æŒä¹…åŒ–**ï¼šå°†æœ‰ä»·å€¼çš„å¯¹è¯è®°å½•æ°¸ä¹…ä¿å­˜åˆ°é£ä¹¦çŸ¥è¯†åº“

### ğŸ” å®‰å…¨é…ç½®ç®¡ç†
- **BYOK æ¨¡å¼**ï¼šBring Your Own Keys - ç”¨æˆ·è‡ªè¡Œæä¾› API å¯†é’¥
- **ä¼šè¯å­˜å‚¨**ï¼šAPI å¯†é’¥ä»…ä¿å­˜åœ¨ Streamlit Session State ä¸­ï¼Œåˆ·æ–°é¡µé¢åéœ€è¦é‡æ–°è¾“å…¥
- **éšç§ä¿æŠ¤**ï¼šä¸æŒä¹…åŒ–æ•æ„Ÿä¿¡æ¯åˆ°æœ¬åœ°æ–‡ä»¶æˆ–æ—¥å¿—
- **é…ç½®éªŒè¯**ï¼šå®æ—¶éªŒè¯ API å¯†é’¥å’Œé£ä¹¦é…ç½®çš„æœ‰æ•ˆæ€§

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Python 3.9+
- æœ‰æ•ˆçš„ API å¯†é’¥ï¼š
  - DeepSeek API Keyï¼ˆä» [DeepSeek å®˜ç½‘](https://platform.deepseek.com/) è·å–ï¼‰
  - Gemini API Keyï¼ˆä» [Google AI Studio](https://makersuite.google.com/app/apikey) è·å–ï¼‰
  - é£ä¹¦åº”ç”¨é…ç½®ï¼ˆéœ€è¦åˆ›å»ºé£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd deepseek-gemini-feishu-assistant
   ```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰**
   ```bash
   python -m venv venv
   # Windows
   venv\Scripts\activate
   # Linux/Mac
   source venv/bin/activate
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**
   
   åˆ›å»º `.streamlit/secrets.toml` æ–‡ä»¶ï¼ˆæˆ–é€šè¿‡ Streamlit ä¾§è¾¹æ æ‰‹åŠ¨è¾“å…¥ï¼‰ï¼š
   ```toml
   # .streamlit/secrets.toml
   DEEPSEEK_API_KEY = "your-deepseek-api-key"
   GEMINI_API_KEY = "your-gemini-api-key"
   FEISHU_APP_ID = "your-feishu-app-id"
   FEISHU_APP_SECRET = "your-feishu-app-secret"
   FEISHU_APP_TOKEN = "your-feishu-app-token"
   FEISHU_TABLE_ID = "your-feishu-table-id"
   ```

   **æ³¨æ„**ï¼š`.streamlit/secrets.toml` æ–‡ä»¶åº”æ·»åŠ åˆ° `.gitignore` ä¸­ï¼Œé¿å… API å¯†é’¥æ³„éœ²ã€‚

5. **è¿è¡Œåº”ç”¨**
   ```bash
   streamlit run app.py
   ```

6. **è®¿é—®åº”ç”¨**
   æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8501`

## ğŸ“ é¡¹ç›®ç»“æ„

```
deepseek-gemini-feishu-assistant/
â”œâ”€â”€ app.py                    # Streamlit ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜æ–‡æ¡£ï¼ˆå½“å‰æ–‡ä»¶ï¼‰
â”œâ”€â”€ requirements.txt          # Python ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ PRD.md                    # äº§å“éœ€æ±‚æ–‡æ¡£
â”œâ”€â”€ clients/                  # AI å®¢æˆ·ç«¯æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ deepseek_client.py    # DeepSeek API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ gemini_client.py      # Gemini API å®¢æˆ·ç«¯ï¼ˆæ”¯æŒå›¾ç‰‡ç†è§£ï¼‰
â”‚   â””â”€â”€ feishu_client.py      # é£ä¹¦å¤šç»´è¡¨æ ¼ API å®¢æˆ·ç«¯
â”œâ”€â”€ utils/                    # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ router.py            # æ™ºèƒ½è·¯ç”±é€»è¾‘ï¼ˆæ–‡æœ¬/å›¾ç‰‡åˆ¤æ–­ï¼‰
â”‚   â””â”€â”€ formatters.py        # æ•°æ®æ ¼å¼åŒ–å·¥å…·
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_integration.py  # ç«¯åˆ°ç«¯é›†æˆæµ‹è¯•
â””â”€â”€ .streamlit/              # Streamlit é…ç½®ç›®å½•
    â””â”€â”€ secrets.toml         # API å¯†é’¥é…ç½®æ–‡ä»¶ï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰
```

## ğŸ”§ é…ç½®è¯´æ˜

### API å¯†é’¥è·å–

1. **DeepSeek API Key**
   - è®¿é—® [DeepSeek æ§åˆ¶å°](https://platform.deepseek.com/)
   - æ³¨å†Œè´¦å·å¹¶åˆ›å»º API å¯†é’¥
   - æ³¨æ„ï¼šDeepSeek ä½¿ç”¨ OpenAI å…¼å®¹æ¥å£

2. **Gemini API Key**
   - è®¿é—® [Google AI Studio](https://makersuite.google.com/app/apikey)
   - åˆ›å»º API å¯†é’¥ï¼ˆéœ€è¦ Google è´¦å·ï¼‰
   - å¯ç”¨ Gemini API æœåŠ¡

3. **é£ä¹¦åº”ç”¨é…ç½®**
   - è®¿é—® [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/)
   - åˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨
   - è·å–ä»¥ä¸‹ä¿¡æ¯ï¼š
     - App ID
     - App Secret
     - App Tokenï¼ˆå¤šç»´è¡¨æ ¼æ‰€åœ¨åº”ç”¨çš„ tokenï¼‰
     - Table IDï¼ˆå¤šç»´è¡¨æ ¼çš„ IDï¼‰

### è¿è¡Œæ¨¡å¼

åº”ç”¨æ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼š

1. **é€šè¿‡ secrets.toml æ–‡ä»¶é…ç½®**ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰
   - åˆ›å»º `.streamlit/secrets.toml` æ–‡ä»¶
   - åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½é…ç½®

2. **é€šè¿‡ä¾§è¾¹æ æ‰‹åŠ¨è¾“å…¥**ï¼ˆæ¨èç”¨äºç”Ÿäº§ï¼‰
   - æ¯æ¬¡ä¼šè¯å¼€å§‹æ—¶åœ¨ä¾§è¾¹æ è¾“å…¥ API å¯†é’¥
   - é…ç½®ä¿¡æ¯ä»…ä¿å­˜åœ¨å½“å‰ä¼šè¯ä¸­ï¼Œåˆ·æ–°é¡µé¢åéœ€è¦é‡æ–°è¾“å…¥
   - æä¾›æ›´å¥½çš„éšç§ä¿æŠ¤

## ğŸ§ª æµ‹è¯•

è¿è¡Œé›†æˆæµ‹è¯•ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼š

```bash
python -m pytest tests/test_integration.py -v
```

æˆ–ç›´æ¥è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
python tests/test_integration.py
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **AI å“åº”æ—¶é—´**ï¼šå¹³å‡ < 3 ç§’
- **é£ä¹¦å†™å…¥æ—¶é—´**ï¼šå¹³å‡ < 2 ç§’
- **æ™ºèƒ½è·¯ç”±å‡†ç¡®ç‡**ï¼š100%ï¼ˆèƒ½æ­£ç¡®è¯†åˆ«æ–‡æœ¬å’Œå›¾ç‰‡è¾“å…¥ï¼‰
- **é£ä¹¦å†™å…¥æˆåŠŸç‡**ï¼š> 95%ï¼ˆç½‘ç»œæ­£å¸¸æ¡ä»¶ä¸‹ï¼‰

## ğŸ›¡ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **API å¯†é’¥ä¿æŠ¤**
   - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API å¯†é’¥
   - ä¸è¦å°† `secrets.toml` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
   - ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å®‰å…¨çš„å¯†é’¥ç®¡ç†æœåŠ¡

2. **ä¼šè¯å®‰å…¨**
   - åº”ç”¨ä½¿ç”¨ Streamlit Session State ä¸´æ—¶å­˜å‚¨é…ç½®
   - é¡µé¢åˆ·æ–°æˆ–å…³é—­åé…ç½®ä¿¡æ¯è‡ªåŠ¨æ¸…é™¤
   - ç¬¦åˆ BYOKï¼ˆBring Your Own Keysï¼‰å®‰å…¨åŸåˆ™

3. **ç½‘ç»œä¼ è¾“**
   - æ‰€æœ‰ API è°ƒç”¨ä½¿ç”¨ HTTPS åŠ å¯†ä¼ è¾“
   - æ”¯æŒä»£ç†é…ç½®ï¼ˆå¯åœ¨ä¾§è¾¹æ è®¾ç½®ï¼‰

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [DeepSeek](https://www.deepseek.com/) - æä¾›ä¼˜ç§€çš„æ–‡æœ¬ AI æ¨¡å‹
- [Google Gemini](https://deepmind.google/technologies/gemini/) - æä¾›å¼ºå¤§çš„å¤šæ¨¡æ€ AI èƒ½åŠ›
- [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/) - æä¾›ç¨³å®šçš„å¤šç»´è¡¨æ ¼ API
- [Streamlit](https://streamlit.io/) - è®© AI åº”ç”¨å¼€å‘å˜å¾—ç®€å•

---

**é¡¹ç›®çŠ¶æ€**ï¼šâœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼Œé¡¹ç›®è¿›å…¥éƒ¨ç½²å‡†å¤‡é˜¶æ®µ

**æœ€åæ›´æ–°**ï¼š2026-02-02